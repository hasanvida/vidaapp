<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document Upload & Result</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background: #f4f7f6;
    color: #1a1a1a;
    margin: 0;
    padding: 0;
  }
  header {
    background: #2b7a78;
    color: #fff;
    padding: 1rem;
    text-align: center;
    font-size: 1.5rem;
  }
  .container {
    display: flex;
    flex-direction: row;
    height: calc(100vh - 64px);
  }
  .left, .right {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
  }
  .left {
    background: #def2f1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
    gap: 1rem;
  }
  .right {
    background: #f0f5f9;
    border-left: 2px solid #2b7a78;
  }
  input[type="file"] {
    padding: 0.5rem;
    border: 2px dashed #3aafa9;
    border-radius: 8px;
    background: #fff;
    cursor: pointer;
  }
  img.preview {
    max-width: 100%;
    max-height: 300px;
    border-radius: 8px;
    border: 1px solid #3aafa9;
  }
  button.upload-btn {
    background: #3aafa9;
    color: #fff;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
  }
  pre.result-box {
    background: #fff;
    border: 1px solid #2b7a78;
    border-radius: 8px;
    padding: 1rem;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 80%;
    overflow-y: auto;
  }
</style>
</head>
<body>
  <header>Upload Document & View API Result</header>
  <div class="container">
    <div class="left">
      <input type="file" id="fileInput" accept="image/*">
      <img id="preview" class="preview" src="" alt="Image preview" style="display:none;">
      <button class="upload-btn" id="uploadBtn">Upload & Send</button>
    </div>
    <div class="right">
      <h3>API Response:</h3>
      <pre id="apiResult" class="result-box">{ Result will appear here }</pre>
    </div>
  </div>

<script>
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const uploadBtn = document.getElementById('uploadBtn');
const apiResult = document.getElementById('apiResult');

fileInput.addEventListener('change', () => {
  const file = fileInput.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      preview.src = e.target.result;
      preview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    preview.src = '';
    preview.style.display = 'none';
  }
});

uploadBtn.addEventListener('click', async () => {
  const file = fileInput.files[0];
  if (!file) return alert('Please select a file first.');

  const formData = new FormData();
  formData.append('file', file);

  try {
    const res = await fetch('http://localhost:3001/api/ktp-ocr', {
      method: 'POST',
      body: formData
    });
    const data = await res.json();
    apiResult.textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    apiResult.textContent = 'Error: ' + err.message;
  }
});
</script>
</body>
</html>






